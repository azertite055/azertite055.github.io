<!DOCTYPE html>
<html>
<head>
<title>Text Dash</title>
<style>
body {
  background-color: white;
  font-family: courier;
  text-align: center;
}
p {
  text-align: center;
}
table {
	text-align: left;
	margin-left: auto;
	margin-right: auto;
	border: 1px solid black;
	border-spacing: 1px;
}
td {
	border: 1px solid black;
}
#display {
	font-size: 12pt;
}
#screen {
	line-height: 0;
}
#editor {
	line-height: 1;
	display: none;
}
#coltrigopts, #camtrigopts, #customlv, #options, #removecol, #removecam, #practicebar, .editorstuff {
	display: none;
}
#coltrigs, #bgtrigs, #camtrigs {
	background-color: #FFFFFF;
}
.top {
	border-top: 1px solid black;
}
.left {
	border-left: 1px solid black;
}
.right {
	border-right: 1px solid black;
}
.bottom {
	border-bottom: 1px solid black;
}
.disable-select {
  -webkit-user-select: none;  
  -moz-user-select: none;    
  -ms-user-select: none;      
  user-select: none;
}
</style>
</head>
<body>
-=- Text Dash! -=-<br>Press any key or click the screen to jump, select level by clicking below<br><br>
<span onclick="showMain()">Main levels</span> | <span onclick="showCustom()">Custom levels</span> | <span onclick="goToEditor()">Editor</span> | <span onclick="goToOptions()">Options</span><br>
<span id="notoptions"><span id="mainlv"><span onclick="goToLevel('base1')">Level 1</span> | <span onclick="goToLevel('base2')">Level 2</span> | <span onclick="goToLevel('base3')">Level 3</span> | <span onclick="goToLevel('base4')">Level 4</span></span><span id="customlv"></span>
<br><br>
<div><span id="levelstatus" class="playstuff">Playing <span id="mapname"></span> | Total attempts: <span id="totalatts"></span> | Best: <span id="bestp"></span>%</span><span class="editorstuff">Viewing level <span id="currentedit"></span></span></div>
<br><br><br><br>
<div><span id="attempt" class="playstuff"></span><span class="editorstuff">Length:<input type="number" id="editlen" name="editlen"> | <span onclick="editorChangeLen(Number(editlen.value))">Apply</span></span></div>
<div><span id="precent" class="playstuff"></span><span class="editorstuff"><span onmousedown="heldArrow=1;" onmouseup="heldArrow=0;">&lt;&lt;</span>&nbsp;&nbsp;<span  onmousedown="heldArrow=2;" onmouseup="heldArrow=0;">&lt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  onmousedown="heldArrow=3;" onmouseup="heldArrow=0;">&gt;</span>&nbsp;&nbsp;<span  onmousedown="heldArrow=4;" onmouseup="heldArrow=0;">&gt;&gt;</span></span></div>
<div id="display">
<div id="screen" class="disable-select" onmousedown="held = true" onmouseup="waveSpd = 1; held = false; bufferCheck = true;" onmouseenter="inside=true;" onmouseleave="inside=false;">
<p><span id="line0" class="t left right top"></span></p>
<p><span id="line1" class="t left right"></span></p>
<p><span id="line2" class="t left right"></span></p>
<p><span id="line3" class="t left right"></span></p>
<p><span id="line4" class="t left right"></span></p>
<p><span id="line5" class="t left right"></span></p>
<p><span id="line6" class="t left right"></span></p>
<p><span id="line7" class="t left right"></span></p>
<p><span id="line8" class="t left right"></span></p>
<p><span id="line9" class="t left right"></span></p>
<p><span id="line10" class="t left right bottom"></span></p>
</div>
<div id="practicetoggle" class="playstuff" onclick="switchPracticeState()"><span id="eep"></span> practice mode</div><br>
<div id="practicebar" class="playstuff"><span onclick="checkpoints.push([posX,posY,mode,gravity,speed,campos,jumpFrames,hoverFrames])">Place checkpoint</span> | <span onclick="checkpoints.pop()">Remove checkpoint</span></div>
<div class="editorstuff">
Object <span id="objtrigs">----------------------</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;BG <span id="bgtrigs">----------------------</span>&nbsp;&nbsp;&nbsp;<span onclick="invertLines();">b/w</span><br>
Camera <span id="camtrigs">----------------------</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><br>
<span id="setpos" onclick="inStartPosSelector = !inStartPosSelector; if(inStartPosSelector){startposes['custom'+currentEditorLevel]=false;}"><span id="cssp"></span>et start position<span id="catd"></span></span><br>
<div id="coltrigopts">Color:<input type="color" id="colo" name="colo"> | Fadetime:<input type="number" id="fade" name="fade"> |<span onclick="addTrigger()"> Submit </span>|<span onclick="document.getElementById('coltrigopts').style.display = 'none'"> Cancel </span><span id="removecol" onclick="removeTrigTarget()">| Delete</span></div><br>
<div id="camtrigopts">Position:<input type="number" id="posi" name="posi"> | Time:<input type="number" id="time" name="time"> |<span onclick="addTrigger()"> Submit </span>|<span onclick="document.getElementById('camtrigopts').style.display = 'none'"> Cancel </span><span id="removecam" onclick="removeTrigTarget()">| Delete</span></div><br><br>
Block to add: <span id="blocktoadd"></span><br>
<div><span id="blocklist"></span> |<span onclick="whatToAdd=prompt('Enter custom object string (USE . INSTEAD OF SPACE)')"> Custom</span></div>
<br><div><span onclick="exportMap()">Export</span> | <span onclick="importMap()">Import</span></div>
</div>
</div></span>
<span id="options">
<br>- Saving -<br>
<span onclick="saveGame()">Save</span> | <span onclick="loadGame()">Load</span> | <span onclick="swicthAutosave()">Autosave every minute: <span id="aso"></span></span> | <span onclick="wipeStats()">Wipe bests and attempts</span> | <span onclick="wipeGame()">Wipe everything</span><br><br><br>
- Display -<br>
<span onclick="showPercents=!showPercents;"><span id="shp"></span> percentage</span> | <span onclick="showAtts=!showAtts;"><span id="sha"></span> attempts</span> | <span onclick ="screenSize=prompt('Enter new font size (default: 12)')">Change screen size<br><br><br>
- Editor help-<br>
Click on the arrows to move the editor screen. If you want to playtest your level, go to the custom level tab.<br>
Periods will render as empty spaces ingame. Spaces will cause the screen to break.
Add triggers by clicking on the lines below the editor. You have to set the values that appear below then click Submit for the trigger to be added.<br>
Cilcking on an existing trigger will allow you to edit or remove it.<br>
If a trigger activates before the previous has finished, the latter will instantly finish.<br>
The b/w button switches the trigger menu's background color between black and white, for better visibility.
If you want to make a trigger instantaneous, set the time to 1. (0 causes a division by zero error)<br>
The player starts on the 8th block, at the 4th block from the top.<br>
The level ends 23 tiles before the editor does.<br><br>
- Object list -<br>
<table><tr>
<td>.: empty<br>#,Z: block/floor<br>A,V: spike<br>D: d block (wave can slide on it)<br>H: h block (can hit head and not die)<br>-: jump pad</td>
<td>=: gravity pad<br>Q: jump orb<br>@: gravity orb<br>Ö: gravity jump orb<br>~: dash orb<br>÷: gravity dash orb</td>
<td>¤: spider orb<br>X,>,O,W,U: gamemode changes (cube,wave,ball,spider,ufo in that order)<br>0,1,2,3,4: speed changes<br>): normal gravity<br>[: reverse gravity<br>All others: decoration (has no collision or special effect)</td>
</tr></table>
</span>
<script>
function makeEmpty(len){
	var result = [];
	var part = [];
	while (len > 0){
		part.push(".");
		len--;
	}
	for (i = 0; i < 11; i++){
		result.push(structuredClone(part));
	}
	return result;
}
var maps = {
	base1:[
	arrayify("........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................"),
	arrayify("........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................"),
	arrayify("........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................"),
	arrayify("........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................"),
	arrayify("...................................................................................................................................................................................................................................A.....................................................................................................................................##########............#####################################............................Q....Q....Q............................."),
	arrayify("................................Hi!.#.are.blocks,as.you.can.see......................A.is.a.spike............................................................................................###########.....#####.....#############.....................................................................................................................................VVVVVVVVVV...............................V..........=.VVVVV.......................Q............................................"),
	arrayify(".............................................................................................................................................................................................############A.............#############........................Q.is.a.jump.orb,.try.clicking.it!.....................................Jump.pads!............................................................................................................................................................"),
	arrayify(".................................................................................................................................................................................##########################A...........#############.........................................................................Q.....................................................................................................................................#####................................................"),
	arrayify("..........................................................................................A...........................A................A..................AA.....................###########################AAAAAAAAAAA#############AAAAA.........................................................................................................-.............-............-.................=..........AAAAAAAAAAAAAAAA.........................#####AAAAAAAAAAAAAAAAAAAAAAA........................."),
	arrayify("##########################################################################################################################################################################################################################################################################################################AAAAAAA#######################################################################################################################################################################################"),
	arrayify("########################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################")],
	base2:[
	arrayify(".....................................................................................................................................#.........................#..............................................................#..............................................#........................D....................................................................#.................................................................................................................................#..................................................................................................................................................................................................................................................................................................................................."),
	arrayify(".....................................................................................................................................#.........................#............................................Gravity.orb.......#..............................................#........................D...Wave.normally.dies.on.blocks,.it.can.only.survive.on.D.blocks...#....................................................................AA............................................................#..................................................................................................................................................................................................................................................................................................................................."),
	arrayify(".....................................................................................................................................#.........................#.........Don't.fall.off!......................................#..............................................#........................D..................................................................#.........AAAA........................................................VV............................AAAA............................#................................Speed.change......................................................................................................................................................................................................................................................................................."),
	arrayify(".....................................................................................................................................###########################.................................................@............#..............................................#.....Wave!...........>..DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDVVVVVVVVVVVVVVVVVVVVVV..........VVVV.................AAA..............AAAA................................................VVVV...................AAAA.....#..................................................................................................................................................................................................................................................................................................................................."),
	arrayify(".....................................................................................................................................#........................................................................................################################################..............................................###########..........#......................................................VVV..............VVVV.......................................................................VVVV.....#..................................................................................................................................................................................................................................................................................................................................."),
	arrayify("...................................Welcome.to.level 2...........................A....................................................#..............................................................................................VV......VV......VV.............#........................-.........................##.....###...###......#........................................................................................................................AAAA.....................................X....................................2............................................................................................................................................................................................................................................................................................."),
	arrayify("............................................................................Q...#..........................................Ball!.....V......................##################...................................A..............AA......AA......AA......AA.........#.......................##........................####.....#.....#......###............................#......................................................................AA..................VVVV.....................................X...........................................................................................................................3......................................................4....................WOOOOAAAAHHHHHHHH!!!!!!!........................0.........................................................................."),
	arrayify("................................................................................#...........................................................................#................#..Q....Q....Q....Q...#######################################################..........X................-..............................######................#####..................................................................................................VV...........................................................X....................................A......................................................................................3......................................................4....................................................................0.........................................................................."),
	arrayify(".........................AA...............AA.............AA.............-.......#.....................AAA............................O......................#................#.....................#.....................................................#........####################.............................########......#.......#######...........................................AAAA................................AAA...........................................................................DDDD###################################........................AA......................................AA....................3..............A....................A..................4....................................................................0...................AAA...................................................."),
	arrayify("#############################################################################################################################################################................#.....................#.....................................................#........#..........#########################DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDAAAAAAAAAAAAAAAAAAAAAA..................VVVV................................VVV......................................................AAAA.................####################################################################################################################################################################################################################################################################################################################################"),
	arrayify("#############################################################################################################################################################................#.....................#.....................................................#........#..........#############################################################################################..............................................................................................................VVVV.................####################################################################################################################################################################################################################################################################################################################################")],
	base3:[
	arrayify(".......................................................................................................................................................................................................................######################################====#####....................#####################################################################................#...........#...........#......................................................................................#...............#........................................................................................"),
	arrayify("..........................................................................................................................................................................................................................................V.......V.....X.................................#####################################################################................#...........#...........#......................................................................................#...............#........................................................................................"),
	arrayify(".............................................................................................................................................................................................................................3O......A........A.........X...............4>................#################.......................................#############................#...........#...........#......................................................................................#################........................................................................................"),
	arrayify("...............................................................................................................................................................................................................QQQQQQ..###############################################..4>.....................................................................................................#...........#...........#......................................................................................VVVVVVVVVVVVVVVVV........................................................................................"),
	arrayify("...............................Demon?.........................................................................................................................................................................QQQQQQQ..#.............................................#...>.....................................................................................................#...........#...........#..............................................................................................................................................................................................."),
	arrayify(".............................................................................................................................................................................................................Q.........#.............................................#...................................................................................................#.....#.....#.....#.....#.....#.......................................................................1.................@...@....@..@.........................Unbelieveable..................................................."),
	arrayify(".................................2........................................................................................0...................................1................Q............Q...............Q..........#.............................................#...................................................................................................#.....#.....#.....#.....#.....#.......................................................................1..............@@@@@@@@@@@@@@@@@........................................................................................"),
	arrayify(".................................2........................................................................................0...................................1............................................Q...........#.............................................#.....................................................################..............................#...........#...........#.......X.............AA....................................AA................1..............@...@..@..@..@..@........................................................................................"),
	arrayify(".................................2...........AAA.......AAA........AAA.......AAA.........AAA..........AAA.......AAA........0.........AAAA..........AAAA........1..............AAAAA........AAAAA........................#.............................................#....................######################################################################.........#...........#...........#DDDDDDDD######################################################################......................................................................................................................."),
	arrayify("########################################################################################################################################################################################################################.............................................###########################################################################################.........#...........#...........#..........................................................................##################AAAAAAAAAAAAAAAAA########################################################################################"),
	arrayify("########################################################################################################################################################################################################################.............................................###########################################################################################.........#...........#...........#..........................................................................###########################################################################################################################")],
	base4: [[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".",".","V","V",".","V","V","V","#","#","#","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","#",".",".",".","#","V","V","V","V","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".","#","#",".","V","A",".",".",".",".",".",".","#","#","V","A","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","A","V","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".","#",".",".","#",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","A",".","A","V",".","V","A",".","A","V",".",".","#",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","<","3",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#",".",".",".","V","V","V","V","V",".","V","V","V","V","V","V","V",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","#",".",".",".","#","V","V","V","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".",".",".","V","A",".",".",".",".",".",".",".","#","V","A","#","#","#","#","#",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","A","V","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".","#",".",".","#",".",".",".",".",".",".",".",".","A","V",".",".",".",".",".",".",".",".",".",".",".","#",".",".","#",".",".",".",".",".",".",".",".","#",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","A","V",".",".",".","V","A","V",".",".",".","#",".","^",".",".",".",".","^",".","#",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".","#","#",".",".",".",".","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","-",".",".",".","#",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".","#",".",".",".",".","#",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".","V","V","V",".",".",".",".",".","@",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","#",".",".",".","#","V","V","V","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".",".",".",".",".","V","A",".",".",".",".",".",".",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","A","V","#","#","#","#","#","#","#",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".","#",".",".","#",".",".",".",".",".",".",".","A","V",".",".",".",".",".","Ö",".",".",".",".",".",".","#",".",".","#","#",".",".",".",".",".",".","#","#",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".","V","V","V","V","V",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".","A",".",".",".",".",".",".",".",".",".","V","A",".",".",".","A","V",".",".",".",".","#",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".","#","#","#","#",".",".",".",".",".",".",".",".",")",".",".",".",".",".",".",".",".",".",")",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".","V","V","V","V","V","#","#",".",".",".","#","#","V","V","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".",".",".",".",".",".",".","V","A",".",".",".",".",".",".",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","A","V","#","#","#","#","#","#","#",".",".","O",".",".",".",".",".","#","#","#","#","#","#","#","#","#",".",".","-",".",".",".",".",".",".","A","V",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".","A","V","A",".",".",".",".",".",".",".",".",".","V","A",".","A","V",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".","D","D","D","D","D","D","D","D","D","D","D","D","#",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".","H","o","l","d",".","t","o",".","d","a","s","h","!",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A",".",".",".",".","#",".","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","Q",".",".",".",".","Ö",".",".","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","0",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".","Ö",".",".",".",".",".","@",".",".",".",".",".",".","Q",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V",".","V","#",".","X",".","X",".","#","V",".","V","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".","A",".",".",".",".","A",".",".",".","V",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".","Q",".",".",".",".",".","Q",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".","=","=","=","=","=","=","=",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","U",".","F",".","O","#",".",".",".","U",".",".","3",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V",".",".",".",".",".","V","A","V",".",".",".",".",".",".",".",".",".",".","V","A","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".","#","#","#",".",".",".",".","#",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".","#","D","D","D","D","D","D",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V",".",".","G","G","G",".","G","G","G",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#",".",".",".",".","#",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","Q",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V",".",".","#","#","#","#","#","#","#",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".",".","A","A",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A",".",".",".",".","A",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".",".",".","A",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".","V",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","=","=","=","=","=","=",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".","#",".",".",".",".",".","#",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".","A",".",".",".",".",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V","V","V","V","V","V","V","V",".",".",".","G",".",".",".","G",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","A",".",".",".",".",".",".",".",".","#",".",".",".",".","#",".",".",".",".","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V",".",".",".","-",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","M",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".","#","#","#","#",".","#","#",".",".",".",".",".",".",".",".",".",".",".","@",".",".",".","A","A","A",".",".",".",".",".",".",".",".",".",".",".",".","V",".",".",".","V",".",".",".",".",".","V",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","A",".","2",".",".",".",".",".",".","A","V",".",".","#","#",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".",".",".",".",".","A","A","A",".",".",".",".",".",".",".",".",".","Q",".",".",".",".",".","Q",".",".",".",".",".","V","A",".",".",".",".","0",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","=","=","=","=","=","=","=","=","=","=",".",".",".",".",".",".",".",".","Q",".",".","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",">",".",">",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".","#",".",".",".",".","#","#","#",".",".",".",".","#",".",".",".",".",".",".",".",".",".","D","D","D","D","#",".","A",".",".",".",".","A",".","1",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","~",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","V","V","V",".",".",".",".","G",".","G",".","G",".","G",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".","#","#","#","#",".",".",".",".","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A",".",".",".","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".","#",".",".",".",".",".",".","#",".",".","#","#","#","#","#",".",".","#","#",".","#","#",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","A","A","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","A",".",">",".",".",".",".","A","V",".",".",".","#","#",".",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".",".",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=",".",".","X",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".","A","A","A","A","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".","#","D","D","D","D","D","D","D",".",".","X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","G","G","G",".","G","G","G",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","[",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".","#",".",".","#",".",".",".","#","#","A",".",".","#","#",".","#",".","#",".",".",".",".",".","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".","A","A","A",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".","A","V",".",".","#",".","#","#",".","#",".",".","V","A",".",".",".",".",".",".",".",".",".",".","#","#","#","A","V","#","#","#",".",".",".","#","#","V","A",".",".",".",".",".",".",".",".",".","A","V","#","#","#","#","#","#","#","#","#","#",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".","Ö",".",".",".",".",".",".",".",".",".",".","V","A",".",".",".",".",".",".","A",".",".",".",".",".","A",".",".",".",".",".","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".",".","A","A","A","A","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","V","A",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".",".",".",".","A","A","A",".","#",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".","A","A",".",".",".",".",".",".","A","A",".",".",".",".",".",".","A","A",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","A","A","A","A","A","A","A","A","A","A","A","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".","#","#","#",".",".",".","#",".","#","#",".",".",".",".",".",".",".","A",".","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".","A","V",".",".",".","#","#","#","#","#","#",".",".",".","V","A",".",".",".",".",".",".","#","#","#","#","#","A","V","#","#","#","#","#","#","#","#","#","#","V","A","#","#",".","#",".",".",".","A","V","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","A",".",".","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".","-","-","-",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".","A","A","A","A","A",".",".",".",".",".",".",".",".",".",".",".",".","A","V",".","V","A",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".","D","D","D","D","D","D","D","D","D","D","D","D","#",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".","A","A",".",".","A","A","A","A","A","A","A","A","#","#","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".",".","A","V",".",".",".",".","#",".","#","#",".","#",".",".",".",".","V","A",".",".","#","#","#","#","#","#","#","A","V","#","#","#","#","#","#","#","#","#","#","#","#","V","A","#","#","#","#","#","A","V","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","V","A",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".","-","-","-",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".","#",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".",".",".",".","#","#","#",".",".",".",".",".",".","#","#","#","#","#",".",".",".",".",".",".",".",".",".",".",".","A","V",".",".",".","V","A",".",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".","#",".",".",".",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".","#",".",".",".","#",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#",".",".",".",".",".",".",".","."]],
	custom0: makeEmpty(50),
	custom1: makeEmpty(50),
	custom2: makeEmpty(50),
	custom3: makeEmpty(50),
	custom4: makeEmpty(50),
	custom5: makeEmpty(50),
	custom6: makeEmpty(50),
	custom7: makeEmpty(50),
	custom8: makeEmpty(50),
	custom9: makeEmpty(50)};
var triggers = {
	base1:{},
	base2:{},
	base3:{},
	base4:{"x0":[[0,"#ffffff",1]],"x1":[],"x8":[[0,"#ff00ff",20]],"x94":[[0,"#ffffff",25],[1,"#ff00ff",25]],"x160":[[1,"#ff0006",35]],"x180":[[0,"#000000",30]],"x226":[[1,"#000000",1],[0,"#ff0000",10]],"x314":[[0,"#000000",1]],"x315":[[0,"#ff8000",6]],"x353":[[0,"#ffffff",9]],"x380":[[2,"11",20]],"x418":[[0,"#93ffe1",4],[1,"#46beff",4]],"x537":[[0,"#000000",6],[1,"#ffffff",6]],"x528":[[2,"4",25]]},
	custom0: {},
	custom1: {},
	custom2: {},
	custom3: {},
	custom4: {},
	custom5: {},
	custom6: {},
	custom7: {},
	custom8: {},
	custom9: {}
}
/* format reminder
	{	x90: [[0, "#FF0000", 100]],
		x60: [[1, "#FFFF00", 20]],
		x30: [[2, 10, 21]],
		x120: [[0, "#00FFFF", 20], [1, "#000000", 20]],
		x1000:[[0, "#00000", 0],[1, "#FFFFFF", 0],[2, 4, 0]]
	}
	0 obj 1 bg 2 camera
*/
function makeTrigDispArray(){
	var result = [[],[],[]];
	var klist = Object.keys(triggers["custom" + currentEditorLevel]);
	for (i = 0; i < maps["custom" + currentEditorLevel][0].length; i++){
		for (j = 0; j < 3; j++){
			result[j].push("-");
		}
	}
	for (i = 0; i < klist.length; i++){
		for (j = 0; j < triggers["custom" + currentEditorLevel][klist[i]].length; j++){
			var ulist = triggers["custom" + currentEditorLevel][klist[i]][j];
			result[ulist[0]][Number(klist[i].substring(1))] = "O";
			for (k = 1; k <= ulist[2]; k++){
				result[ulist[0]][Number(klist[i].substring(1)) + k] = result[ulist[0]][klist[i].substring(1) + k] == "O" ? "O" : "=";
			}
		}
	}
	return result;
}
/*			       -- TRIGGER LIST --
position: type, params
Types:
0: Object color, params: color, fadetime
1: Background color, params: color, fadetime
2: Camera position, params: position, movetime
*/
var chars = [".","#","Z","A","V","D","H","-","=","Q","@","Ö","~","÷","¤","X",">","O","M","U","0","1","2","3","4",")","["];
var blocklistString = "";
for (i = 0; i < chars.length; i++){
	blocklistString += "<span onclick='whatToAdd=" + '"' + chars[i] + '"' + "'> " + chars[i] + " </span>" + (i == chars.length - 1 ? "" : "|");
}
var whatToAdd = "#";
var inside = false;
document.getElementById("blocklist").innerHTML = blocklistString;
var emptyLevel = [[],[],[],[],[],[],[],[],[],[],[]];
var editorLength = 50;
var displaynames = {
	base1: "Level 1",
	base2: "Level 2",
	base3: "Level 3",
	base4: "Level 4",
	custom0: "0",
	custom1: "1",
	custom2: "2",
	custom3: "3",
	custom4: "4",
	custom5: "5",
	custom6: "6",
	custom7: "7",
	custom8: "8",
	custom9: "9"
};
var bests = {
	base1: 0,
	base2: 0,
	base3: 0,
	base4: 0,
	custom0: 0,
	custom1: 0,
	custom2: 0,
	custom3: 0,
	custom4: 0,
	custom5: 0,
	custom6: 0,
	custom7: 0,
	custom8: 0,
	custom9: 0
};
var startposes = {
	custom0: false,
	custom1: false,
	custom2: false,
	custom3: false,
	custom4: false,
	custom5: false,
	custom6: false,
	custom7: false,
	custom8: false,
	custom9: false
};
var freshBests = structuredClone(bests);
var freshMaps = structuredClone(maps);
var freshAttempts = structuredClone(attempts);
var freshTriggers = structuredClone(triggers);
var inEditor = false;
var editorTarget = [0, 0];
var triggerTarget = [0, 0];

//html constructrors

var editorScreen = "";
for (i = 0; i < 11; i++){
	editorScreen += "<p><span id='line" + i + "'>";
	if(i!=0){editorScreen += "<br>";}
	for (j = 0; j < 22; j++){
		editorScreen += "<span id='" + j + "m" + i + "' class='" + (i == 0 ? "top " : "") + (i == 10 ? "bottom " : "") + (j == 0 ? "left " : "") + (j == 21 ? "right " : "") + "'" + "onmouseenter='editorTarget = ["+j+"+posX,"+i+"]'>.</span>";
	}
	editorScreen += "</span></p>";
}//creates the editor dislpay so i won't have to
var gameScreen = structuredClone(document.getElementById("screen").innerHTML);
function triglinegen(s){
	var result = "";
	for (i = 0; i < 22; i++){
		result += "<span id='" + i + "t" + s + "' onclick='triggerTarget=[" + s + "," + i + "+posX]; makeDeletor(); openTrigPage(" + s +")'>-</span>";
	}
	return result;
}
document.getElementById("objtrigs").innerHTML = triglinegen(0);
document.getElementById("bgtrigs").innerHTML = triglinegen(1);
document.getElementById("camtrigs").innerHTML = triglinegen(2);
function rgb(r,g,b){
	return [r,g,b];
}
function invertLines(){
	var currbg = eval(document.getElementById("objtrigs").style["background-color"] == "" ? "rgb(255,255,255)" : document.getElementById("objtrigs").style["background-color"]);
	if(isNaN(currbg[0])){currbg=[255,255,255];}
	for (i = 0; i < 3; i++){
		currbg[i] = 255 - currbg[i];
	}
	currbg = ntoc(currbg);
	document.getElementById("objtrigs").style["background-color"] = currbg;
	document.getElementById("bgtrigs").style["background-color"] = currbg;
	document.getElementById("camtrigs").style["background-color"] = currbg;
}
var csel = ""
for (i = 0; i < 10; i++){
	csel += "<span onclick='if(inEditor){currentEditorLevel="+ i +";goToLevel("+'"custom"+'+ i +")}else{goToLevel("+'"custom"+'+ i +")}'>"+ " " + i + " " +"</span>" + (i == 9 ? "" : "|");
}
document.getElementById("customlv").innerHTML = csel;
var currentEditorLevel = 0;
function editorChangeLen(newl){
var oldl = structuredClone(maps["custom" + currentEditorLevel][0].length);
	if (newl > maps["custom" + currentEditorLevel][0].length){
		for (i = 0; i < newl - oldl; i++){
			for (j = 0; j < 11; j++){
				maps["custom" + currentEditorLevel][j].push(".");
			}
		}
	}
	else if (newl < oldl){
		for (i = 0; i < 11; i++){
			maps["custom" + currentEditorLevel][i] = maps["custom" + currentEditorLevel][i].slice(0, newl);
			posX = Math.min(posX, newl-22);
		}
	}
}
function makeDeletor(){
	if(triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]] === undefined){
		triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]] = [];
	}
	for (i = 0; i < triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]].length; i++){
		if (triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]][i][0] == triggerTarget[0]){
			if (triggerTarget[0] != 2){
				document.getElementById("removecol").style.display = "inline";
				trigDelTarget = ["x"+triggerTarget[1], triggerTarget[0]];
			}
			else{
				document.getElementById("removecam").style.display = "inline";
				trigDelTarget = ["x"+triggerTarget[1], triggerTarget[0]];
			}
		}
		else{
			document.getElementById("removecol").style.display = "none";
			document.getElementById("removecam").style.display = "none";
		}
	}
}
var trigDelTarget = ["x0", 0];
function addTrigger(){
	document.getElementById("coltrigopts").style.display = "none";
	document.getElementById("camtrigopts").style.display = "none";
	var exists = false;
	var at = 0;
	for (i = 0; i < triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]].length; i++){
		if(triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]][i][0] == triggerTarget[0]){
			exists = true;
			at = i;
			break;
		}
	}
	if(triggerTarget[0] != 2){
		if(exists){
			triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]][at] = [triggerTarget[0], colo.value, Number(fade.value)];
		}
		else{
			triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]].push([triggerTarget[0], colo.value, Number(fade.value)]);
		}
	}
	else{
		if(exists){
			triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]][at] = [triggerTarget[0], posi.value, Number(time.value)];
		}
		else{
			triggers["custom" + currentEditorLevel]["x"+triggerTarget[1]].push([triggerTarget[0], posi.value, Number(time.value)]);
		}
	}
}
function removeTrigTarget(){
	triggers["custom" + currentEditorLevel][trigDelTarget[0]] = triggers["custom" + currentEditorLevel][trigDelTarget[0]].filter(function(i){return i[0] != trigDelTarget[1]});
	document.getElementById("coltrigopts").style.display = "none";
	document.getElementById("camtrigopts").style.display = "none";
	document.getElementById("removecol").style.display = "none";
	document.getElementById("removecam").style.display = "none";
}
function openTrigPage(type){
	if(type == 2){
		document.getElementById("coltrigopts").style.display = "none";
		document.getElementById("camtrigopts").style.display = "inline";
	}
	else {
		document.getElementById("coltrigopts").style.display = "inline";
		document.getElementById("camtrigopts").style.display = "none";
	}
}
function cton(c){
	var d = [0, 0, 0];
	for (i = 0; i < 3; i++){
		d[i] = Number("0x" + c.substring(2*i+1,2*i+3));
	}
	return d;
}
function ntoc(n){
	var o = "#";
	for (i = 0; i < 3; i++){
		if (n[i] == 0){
			o += "00";
		}
		else if (n[i] < 16){
			o += "0" + n[i].toString(16);
		}
		else{
			o += n[i].toString(16);
		}
	}
	return o;
}
var defaultValues = ["#000000", "#FFFFFF", 4];
function triggerValue(type, place){
	var poslist = [];
	var pos2list = [];
	var idk = false;
	var posOfSomething = 0;
	var lastIndex = -1;
	var result;
	var klist = Object.keys(triggers[level]).sort(function (a, b){
		return Number(a.substring(1)) - Number(b.substring(1));
	});
	for (i = 0; i < klist.length; i++){
		for (j = 0; j < triggers[level][klist[i]].length; j++){
			if (triggers[level][klist[i]][j][0] == type){
				idk = true;
				posOfSomething = j;
			}
		}
		if(idk){
			poslist.push(Number(klist[i].substring(1)));
			pos2list.push(posOfSomething);
		}
		idk = false;
	}
	for (i = 0; i < poslist.length; i++){
		if(place > poslist[i]){
			lastIndex++;
		}
	}
	var cpos = (lastIndex == -1) ? 0 : poslist[lastIndex]; //current trigger position
	var ctrigv = (lastIndex == -1) ? defaultValues[type] : triggers[level]["x" + poslist[lastIndex]][pos2list[lastIndex]][1]; //current trigger
	var ctrigt = (lastIndex == -1) ? defaultValues[type] : triggers[level]["x" + poslist[lastIndex]][pos2list[lastIndex]][2];
	var ptrigv = (lastIndex <= 0) ? defaultValues[type] : triggers[level]["x" + poslist[lastIndex - 1]][pos2list[lastIndex - 1]][1]; //previous trigger
	if (lastIndex != -1){
		if (type == 2){
			return Math.floor(ptrigv + (ctrigv - ptrigv) * Math.min((place - cpos) / ctrigt, 1));
		}
		else{
			result = [];
			if(!Array.isArray(ctrigv)){ctrigv = cton(ctrigv);}
			if(!Array.isArray(ptrigv)){ptrigv = cton(ptrigv);}
			for (i = 0; i < 3; i++){
				result.push(Math.floor(ptrigv[i] + (ctrigv[i] - ptrigv[i]) * Math.min((place - cpos) / ctrigt, 1)));
			}
			return ntoc(result);
		}
	}
	else { 
	return defaultValues[type];
	}
}
var subpixel = 5; //0 to 9, only used for moving the editor
var heldArrow = 0;
var arrowSpeeds = [0, -40, -5, 5, 40];
var solid = ["#", "Z", "D", "H"];
var deadly = ["A", "V",];
var tickrates = [100, 70, 50, 35, 27, 5]; //ms per frame on diffferent speeds (speed chamge works like speedhack here)(last is editor exclusive)
var speed = 1;
var icons = ["X", ">", "O", "M", "U"]; //icons for different gamemodes (0=cube, 1=wave, 2=ball, 3=spider, 4=ufo)
var players = 1;
var mode = 0; //refer to previous for explanation
var attempt = 1;
var attempts = {
	base1: 0,
	base2: 0,
	base3: 0,
	base4: 0,
	custom0: 0,
	custom1: 0,
	custom2: 0,
	custom3: 0,
	custom4: 0,
	custom5: 0,
	custom6: 0,
	custom7: 0,
	custom8: 0,
	custom9: 0
};
var gravity = 1;
var waveSpd = 1;
var held = false;
var bufferCheck = true;
var level = "base1";
var posX = 7;
var posY = 8;
var campos = 4; //tiles left of the player
//gravity sucks here, when you jump you go up, hover, then go down.
var jumpFrames = 0; //this tracks how many frames you will go up for
var hoverFrames = 0; //this tracks how many frames you will hover for
var dashing = false;
function showMain(){
	inEditor = false;
	document.getElementById("customlv").style.display = "none";
	document.getElementById("mainlv").style.display = "inline";
	for (i = 0; i < document.getElementsByClassName("editorstuff").length; i++){
		document.getElementsByClassName("editorstuff")[i].style.display = "none";
	}
	for (i = 0; i < document.getElementsByClassName("playstuff").length; i++){
		document.getElementsByClassName("playstuff")[i].style.display = "inline";
	}
	document.getElementById("screen").innerHTML = gameScreen;
	document.getElementById("notoptions").style.display = "inline";
	document.getElementById("options").style.display = "none";
	speed = 1;
}
function showCustom(){
	inEditor = false;
	document.getElementById("customlv").style.display = "inline";
	document.getElementById("mainlv").style.display = "none";
	for (i = 0; i < document.getElementsByClassName("editorstuff").length; i++){
		document.getElementsByClassName("editorstuff")[i].style.display = "none";
	}
	for (i = 0; i < document.getElementsByClassName("playstuff").length; i++){
		document.getElementsByClassName("playstuff")[i].style.display = "inline";
	}
	document.getElementById("screen").innerHTML = gameScreen;
	document.getElementById("notoptions").style.display = "inline";
	document.getElementById("options").style.display = "none";
	speed = 1;
}
function goToEditor(){
	inEditor = true;
	document.getElementById("customlv").style.display = "inline";
	document.getElementById("mainlv").style.display = "none";
	for (i = 0; i < document.getElementsByClassName("editorstuff").length; i++){
		document.getElementsByClassName("editorstuff")[i].style.display = "inline";
	}
	for (i = 0; i < document.getElementsByClassName("playstuff").length; i++){
		document.getElementsByClassName("playstuff")[i].style.display = "none";
	}
	document.getElementById("screen").innerHTML = editorScreen;
	document.getElementById("notoptions").style.display = "inline";
	document.getElementById("options").style.display = "none";
	posX = 0;
	speed = 5;
	level = "custom" + currentEditorLevel;
}
function goToOptions(){
	document.getElementById("options").style.display = "inline";
	document.getElementById("notoptions").style.display = "none";
}
var inPractice = false;
var inStartPosSelector = false;
var checkpoints = [];
function switchPracticeState(){
	inPractice = !inPractice;
	die();
	if(!inPractice){
		checkpoints = [];
	}
}
function goToLevel(n){
	if(!inPractice){
		if(completionp() >= 99){bests[level] = 100;}
		bests[level] = Math.max(completionp(), bests[level]);
		bests[level] = Math.min(bests[level], 100);
	}
	inPractice = false;
	checkpoints = [];
	attempts[level] += 1;
	attempt = 1;
	level = n;
	posX = 5;
	posY = 7;
	mode = 0;
	gravity = 1;
	speed = 1;
	campos = 4;
	held = false;
	bufferCheck = true;
	bufferNext = false;
	if(inEditor){
		//something important for sure
		posX = 0;
	}
}
function die(){
	if (!inPractice){
	bests[level] = Math.max(completionp(), bests[level]);
	bests[level] = Math.min(bests[level], 100);
	}
	attempt += 1;
	attempts[level] += 1;
	if (!inPractice || checkpoints.length == 0){
		posX = 5;
		posY = 7;
		mode = 0;
		gravity = 1;
		speed = 1;
		campos = 4;
	}
	else{
		posX = checkpoints[checkpoints.length - 1][0];
		posY = checkpoints[checkpoints.length - 1][1];
		mode = checkpoints[checkpoints.length - 1][2];
		gravity = checkpoints[checkpoints.length - 1][3];
		speed = checkpoints[checkpoints.length - 1][4];
		campos = checkpoints[checkpoints.length - 1][5];
		jumpFrames = checkpoints[checkpoints.length - 1][6];
		hoverFrames = checkpoints[checkpoints.length - 1][7];
	}
	if (startposes[level]){
		posX = startposes[level][1];
		posY = startposes[level][0];
		mode = startposes[level][2];
		gravity = startposes[level][3];
		speed = startposes[level][4];
		campos = startposes[level][5];
	}
	held = false;
	bufferCheck = true;
	bufferNext = false;
	deathFlag = true;
}
function completionp(){
	return posX == levelLength ? 100 : Math.floor(100*((posX)/levelLength()));
}
function levelLength(){
	return maps[level][0].length - 23;
}
function arrayify(str){
	var result = [];
	for (i = 0; i < str.length; i++){
		result.push(str[i]);
	}
	return result;
}
function stringify(arr){
	var result = "";
	for (i = 0; i < arr.length; i++){
		result += arr[i];
	}
	return result;
}
function drawLevel(){
	var wmap = inEditor ? structuredClone(maps["custom" + currentEditorLevel]) : structuredClone(maps[level]);
	if (inEditor){
	if (startposes["custom" + currentEditorLevel]){
		wmap[startposes["custom" + currentEditorLevel][0]][startposes["custom" + currentEditorLevel][1]] = "T"
	}
	var trigDispArray = makeTrigDispArray();
		for (i = 0; i < 22; i++){
			for (j = 0; j < 11; j++){
				document.getElementById(i + "m" + j).textContent = wmap[j][i+posX];
			}
			for (j = 0; j < 3; j++){
				document.getElementById(i + "t" + j).textContent = trigDispArray[j][i+posX];
			}
		}
		document.getElementById('0t0').style.color=triggerValue(0,0+posX);document.getElementById('1t0').style.color=triggerValue(0,1+posX);document.getElementById('2t0').style.color=triggerValue(0,2+posX);document.getElementById('3t0').style.color=triggerValue(0,3+posX);document.getElementById('4t0').style.color=triggerValue(0,4+posX);document.getElementById('5t0').style.color=triggerValue(0,5+posX);document.getElementById('6t0').style.color=triggerValue(0,6+posX);document.getElementById('7t0').style.color=triggerValue(0,7+posX);document.getElementById('8t0').style.color=triggerValue(0,8+posX);document.getElementById('9t0').style.color=triggerValue(0,9+posX);document.getElementById('10t0').style.color=triggerValue(0,10+posX);document.getElementById('11t0').style.color=triggerValue(0,11+posX);document.getElementById('12t0').style.color=triggerValue(0,12+posX);document.getElementById('13t0').style.color=triggerValue(0,13+posX);document.getElementById('14t0').style.color=triggerValue(0,14+posX);document.getElementById('15t0').style.color=triggerValue(0,15+posX);document.getElementById('16t0').style.color=triggerValue(0,16+posX);document.getElementById('17t0').style.color=triggerValue(0,17+posX);document.getElementById('18t0').style.color=triggerValue(0,18+posX);document.getElementById('19t0').style.color=triggerValue(0,19+posX);document.getElementById('20t0').style.color=triggerValue(0,20+posX);document.getElementById('21t0').style.color=triggerValue(0,21+posX);document.getElementById('0t1').style.color=triggerValue(1,0+posX);document.getElementById('1t1').style.color=triggerValue(1,1+posX);document.getElementById('2t1').style.color=triggerValue(1,2+posX);document.getElementById('3t1').style.color=triggerValue(1,3+posX);document.getElementById('4t1').style.color=triggerValue(1,4+posX);document.getElementById('5t1').style.color=triggerValue(1,5+posX);document.getElementById('6t1').style.color=triggerValue(1,6+posX);document.getElementById('7t1').style.color=triggerValue(1,7+posX);document.getElementById('8t1').style.color=triggerValue(1,8+posX);document.getElementById('9t1').style.color=triggerValue(1,9+posX);document.getElementById('10t1').style.color=triggerValue(1,10+posX);document.getElementById('11t1').style.color=triggerValue(1,11+posX);document.getElementById('12t1').style.color=triggerValue(1,12+posX);document.getElementById('13t1').style.color=triggerValue(1,13+posX);document.getElementById('14t1').style.color=triggerValue(1,14+posX);document.getElementById('15t1').style.color=triggerValue(1,15+posX);document.getElementById('16t1').style.color=triggerValue(1,16+posX);document.getElementById('17t1').style.color=triggerValue(1,17+posX);document.getElementById('18t1').style.color=triggerValue(1,18+posX);document.getElementById('19t1').style.color=triggerValue(1,19+posX);document.getElementById('20t1').style.color=triggerValue(1,20+posX);document.getElementById('21t1').style.color=triggerValue(1,21+posX);document.getElementById('0t2').style.color=triggerValue(2,0+posX);document.getElementById('1t2').style.color=triggerValue(2,1+posX);document.getElementById('2t2').style.color=triggerValue(2,2+posX);document.getElementById('3t2').style.color=triggerValue(2,3+posX);document.getElementById('4t2').style.color=triggerValue(2,4+posX);document.getElementById('5t2').style.color=triggerValue(2,5+posX);document.getElementById('6t2').style.color=triggerValue(2,6+posX);document.getElementById('7t2').style.color=triggerValue(2,7+posX);document.getElementById('8t2').style.color=triggerValue(2,8+posX);document.getElementById('9t2').style.color=triggerValue(2,9+posX);document.getElementById('10t2').style.color=triggerValue(2,10+posX);document.getElementById('11t2').style.color=triggerValue(2,11+posX);document.getElementById('12t2').style.color=triggerValue(2,12+posX);document.getElementById('13t2').style.color=triggerValue(2,13+posX);document.getElementById('14t2').style.color=triggerValue(2,14+posX);document.getElementById('15t2').style.color=triggerValue(2,15+posX);document.getElementById('16t2').style.color=triggerValue(2,16+posX);document.getElementById('17t2').style.color=triggerValue(2,17+posX);document.getElementById('18t2').style.color=triggerValue(2,18+posX);document.getElementById('19t2').style.color=triggerValue(2,19+posX);document.getElementById('20t2').style.color=triggerValue(2,20+posX);document.getElementById('21t2').style.color=triggerValue(2,21+posX);
	}
	else{
		if(inPractice){
			for (i = 0; i < checkpoints.length; i++){
				wmap[checkpoints[i][1]][checkpoints[i][0]] = "p";
			}
		}
		wmap[posY][posX] = icons[mode];
		document.getElementById("line0").innerHTML = stringify(wmap[0]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line1").innerHTML = stringify(wmap[1]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line2").innerHTML = stringify(wmap[2]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line3").innerHTML = stringify(wmap[3]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line4").innerHTML = stringify(wmap[4]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line5").innerHTML = stringify(wmap[5]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line6").innerHTML = stringify(wmap[6]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line7").innerHTML = stringify(wmap[7]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line8").innerHTML = stringify(wmap[8]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line9").innerHTML = stringify(wmap[9]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
		document.getElementById("line10").innerHTML = stringify(wmap[10]).substring(posX - campos, posX + 22 - campos).replaceAll(".", "&nbsp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;"); //this breaks if you make it a loop for some reason
	}
}
var screenSize = 12;
var showPercents = true;
var showAtts = true;
function exportMap(){
	var exString = ""
	var exDone = [];
	var exPart = ""
	for (i = 0; i < 11; i++){
		for (j = 0; j < maps["custom" + currentEditorLevel][i].length; j++){
			exPart += maps["custom" + currentEditorLevel][i][j];
		}
		exDone.push(exPart);
		exPart = "";
	}
	exString = btoa(JSON.stringify(exDone)) + " " + btoa(JSON.stringify(triggers["custom" + currentEditorLevel]));
	navigator.clipboard.writeText(exString).then(() => {
		/* clipboard successfully set */
		alert("Level copied to clipboard");
	}, () => {
		/* clipboard write failed */
		prompt("Copy your level from here", exDone);
	});
}
function importMap(){
	var imText = prompt("Paste the level here");
	var imDone = [];
	var errorFlag = false;
	var slot = Number(prompt("Which slot to save to? (0 to 9)"));
	imText = imText.split(" ");
	imTextM = JSON.parse(atob(imText[0]));
	if (typeof slot != "number" || slot < 0 || slot > 9){
		alert("invalid slot number");
		errorFlag = true;
	}
	else {
		imDone.push(arrayify(imTextM[0]));
		imDone.push(arrayify(imTextM[1]));
		imDone.push(arrayify(imTextM[2]));
		imDone.push(arrayify(imTextM[3]));
		imDone.push(arrayify(imTextM[4]));
		imDone.push(arrayify(imTextM[5]));
		imDone.push(arrayify(imTextM[6]));
		imDone.push(arrayify(imTextM[7]));
		imDone.push(arrayify(imTextM[8]));
		imDone.push(arrayify(imTextM[9]));
		imDone.push(arrayify(imTextM[10])); //again. this breaks if you make it a loop. why does this keep happening
	}
	if (!errorFlag){
		maps["custom" + slot] = imDone;
		triggers["custom" + slot] = JSON.parse(atob(imText[1]));
		currentEditorLevel = slot;
	}
}
function blockAt(x, y){
	if(y < 0){y = 0}
	if(y > 10){y = 10}
	return maps[level][y][x];
}
function blockNe(){
	return [blockAt(posX-1,posY-1),blockAt(posX-1,posY),blockAt(posX-1,posY+1),blockAt(posX,posY-1),blockAt(posX,posY),blockAt(posX,posY+1),blockAt(posX+1,posY-1),blockAt(posX+1,posY),blockAt(posX+1,posY+1)];
	//returns player block and neighbors as an array
}
// game loop
function step(){
	deathFlag = false;
	var dy = gravity;
	if(!inEditor){
	//handle jumping
	if(held){
		switch (mode){
		case 0:
			if(solid.includes(blockAt(posX, posY + gravity))){
				jumpFrames = 2;
				hoverFrames = 1;
				bufferCheck = false;
			}
			break;
		case 1:
			waveSpd = -1;
			break;
		case 2:
			if(solid.includes(blockAt(posX, posY + gravity))){
				gravity = gravity * -1;
				bufferCheck = false;
			}
			break;
		case 3:
			if(solid.includes(blockAt(posX, posY + gravity)) && bufferCheck){
				gravity = gravity * -1;
				while (!solid.includes(blockAt(posX, posY + gravity))){
					posY += gravity;
					if(posY > 10 || posY+dy < 0){
						break;
					}
				}
				posY += gravity;
				bufferCheck = false;
			}
			break;
		case 4:
			if(bufferCheck){
			jumpFrames = 2;
			hoverFrames = 1;
			bufferCheck = false;
			}
			break;
		}
		if(blockNe().includes("Q") && mode != 1 && bufferCheck){
			jumpFrames = 2;
			hoverFrames = 1;
			bufferCheck = false;
		}
		if(blockNe().includes("@") && bufferCheck){
			gravity = gravity * -1;
			jumpFrames = 0;
			hoverFrames = 0;
			bufferCheck = false;
		}
		if(blockNe().includes("Ö") && bufferCheck){
			gravity = gravity * -1;
			if(mode != 1){
				jumpFrames = 2;
				hoverFrames = 1;
			}
			bufferCheck = false;
		}
		if(blockNe().includes("~") && bufferCheck){
			dashing = true;
			bufferCheck = false;
			jumpFrames = 0;
			hoverFrames = 0;
		}
		if(blockNe().includes("÷") && bufferCheck){
			gravity = gravity * -1;
			dashing = true;
			bufferCheck = false;
			jumpFrames = 0;
			hoverFrames = 0;
		}
		if(blockNe().includes("¤") && bufferCheck){
			gravity = gravity * -1;
				while (!solid.includes(blockAt(posX, posY + gravity))){
					posY += gravity;
					if(posY > 10 || posY+dy < 0){
						break;
					}
				}
				posY += gravity;
				bufferCheck = false;
		}
	}
	//handle special blocks
	if(blockAt(posX, posY) == "-" && mode != 1){
		jumpFrames = 3;
		hoverFrames = 2;
	}
	if(blockAt(posX, posY) == "="){
		gravity = gravity * -1;
		dy = dy * -1;
	}
	if(blockNe().includes(")")){
		gravity = 1;
		dy = 1;
		hoverFrames = 1;
	}
	if(blockNe().includes("[")){
		gravity = -1;
		dy = -1;
		hoverFrames = 1;
	}
	if(blockNe().includes("0")){
		speed = 0;
	}
	if(blockNe().includes("1")){
		speed = 1;
	}
	if(blockNe().includes("2")){
		speed = 2;
	}
	if(blockNe().includes("3")){
		speed = 3;
	}
	if(blockNe().includes("4")){
		speed = 4;
	}	
	if(blockNe().includes("X")){
		mode = 0;
	}	
	if(blockNe().includes(">")){
		mode = 1;
		jumpFrames = 0;
		hoverFrames = 0;
	}	
	if(blockNe().includes("O")){
		mode = 2;
	}
	if(blockNe().includes("M")){
		mode = 3;
	}
	if(blockNe().includes("U")){
		mode = 4;
	}
	if(jumpFrames > 0){
	dy = gravity*-1;
	jumpFrames--;
	}
	else if (hoverFrames > 0){
	dy = 0;
	hoverFrames--;
	}
	if(mode == 1){
		dy = gravity * waveSpd;
	}
	//collision checks
	//check if we hit our head (if we did we die)
	if(solid.includes(blockAt(posX+1, posY+dy)) && dy == gravity * -1 && (mode == 2 || ((mode == 0 || mode == 3) && blockNe().includes("H")) || (mode == 1 && blockNe().includes("D")))){
		dy = 0;
		hoverFrames = 0;
	}
	if(dy == gravity * -1 && solid.includes(blockAt(posX+1,posY+dy)) && mode != 2 && !(mode == 1 && blockNe().includes("D"))){
		die();
	}
	//if a block is below, do not fall
	if(solid.includes(blockAt(posX+1, posY+dy)) && dy == gravity){
		dy = 0;
		if(mode == 1 && !blockNe().includes("D")){
			die();
		}
	}
	if(solid.includes(blockAt(posX+1, posY+dy)) && mode == 1 && waveSpd == -1 && blockNe().includes("D")){
		dy = 0;
	}
	if(dashing){
		dy = 0;
	}
	if(!held && dashing){
		dashing = false;
		jumpFrames = 0;
		hoverFrames = 0;
	}
	//if you hit something, die
	if(solid.includes(blockAt(posX+1, posY+dy)) || deadly.includes(blockAt(posX+1, posY+dy))){
		die();
	}
	//no corner clipping
	if((solid.includes(blockAt(posX+1, posY)) || deadly.includes(blockAt(posX+1, posY))) && (solid.includes(blockAt(posX, posY+dy)) || deadly.includes(blockAt(posX, posY+dy)))){
		die();
	}
	//oob check
	if(posY+dy > 10 || posY+dy < 0){
		die();
	}
	posY = posY + dy;
	if(posX <= levelLength()){
	posX++;
	}
	campos = triggerValue(2, posX);
	//update displays
	document.getElementById("mapname").textContent = displaynames[level];
	document.getElementById("totalatts").textContent = attempts[level];
	document.getElementById("bestp").textContent = bests[level];
	document.getElementById("attempt").textContent = showAtts ? "Attempt " + attempt : "";
	document.getElementById("precent").textContent = showPercents ? completionp() + "%" : "";
	if(posX >= levelLength()){
	document.getElementById("precent").textContent = "Level complete!";
	}
	document.getElementById("sha").textContent = showAtts ? "Hide" : "Show";
	document.getElementById("shp").textContent = showPercents ? "Hide" : "Show";
	document.getElementById("practicebar").style.display = inPractice ? "inline" : "none";
	document.getElementById("eep").textContent = inPractice ? "Exit" : "Enter";
	document.getElementById("aso").textContent = autosaveOn ? "on" : "off";
	}
	else{
		speed = 5;
		if(held && inside){
			if(!inStartPosSelector){
				for (i = 0; i < whatToAdd.length; i++){
					maps["custom" + currentEditorLevel][editorTarget[1]][editorTarget[0]+i] = whatToAdd[i];
				}
			}
			else{
				startposes["custom" + currentEditorLevel] = [editorTarget[1], editorTarget[0]];
				var q = prompt("Enter the start pos parameters like this: a,b,c,d (no spaces)\na: gamemode(0: cube, 1: wave, 2: ball, 3: spider, 4: ufo)\nb: gravity (1: normal, -1: reverse)\nc: speed (0 to 4)\nd: camera position");
				q = q.split(",");
				startposes["custom" + currentEditorLevel] = startposes["custom" + currentEditorLevel].concat(q);
				for(i = 2; i < 6; i++){
					startposes["custom" + currentEditorLevel][i] = Number(startposes["custom" + currentEditorLevel][i]);
				}
				inStartPosSelector = false;
			}
		}
		document.getElementById("blocktoadd").textContent = whatToAdd;
		document.getElementById("cssp").textContent = inStartPosSelector ? "Click onscreen to s" : "S";
		document.getElementById("catd").textContent = inStartPosSelector ? ", or click here to delete the current one" : "";
		document.getElementById("currentedit").textContent = currentEditorLevel;
		subpixel += arrowSpeeds[heldArrow];
		while (subpixel > 9){
			subpixel -= 10;
			posX = Math.min(levelLength(), posX+1);
		}
		while (subpixel < 0){
			subpixel += 10;
			posX = Math.max(posX-1, 0);
		}
		
	}
	//after all is done, draw shit
	document.getElementById('display').style['font-size'] = Number(screenSize) + "pt";
	document.getElementById("line0").style.color = triggerValue(0, posX);
	document.getElementById("line0").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line1").style.color = triggerValue(0, posX);
	document.getElementById("line1").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line2").style.color = triggerValue(0, posX);
	document.getElementById("line2").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line3").style.color = triggerValue(0, posX);
	document.getElementById("line3").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line4").style.color = triggerValue(0, posX);
	document.getElementById("line4").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line5").style.color = triggerValue(0, posX);
	document.getElementById("line5").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line6").style.color = triggerValue(0, posX);
	document.getElementById("line6").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line7").style.color = triggerValue(0, posX);
	document.getElementById("line7").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line8").style.color = triggerValue(0, posX);
	document.getElementById("line8").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line9").style.color = triggerValue(0, posX);
	document.getElementById("line9").style["background-color"] = triggerValue(1, posX);
	document.getElementById("line10").style.color = triggerValue(0, posX);
	document.getElementById("line10").style["background-color"] = triggerValue(1, posX); //same here. making this a loop crashes stuff. for some reason
	drawLevel();
	setTimeout(step, tickrates[speed] + (deathFlag ? 250 : 0));
}
//actually calling the game loop
function saveGame(){
	localStorage.setItem("maps", JSON.stringify(maps));
	localStorage.setItem("triggers", JSON.stringify(triggers));
	localStorage.setItem("bests", JSON.stringify(bests));
	localStorage.setItem("attempts", JSON.stringify(attempts));
	localStorage.setItem("size", screenSize);
	localStorage.setItem("showp", showPercents);
	localStorage.setItem("showa", showAtts);
	localStorage.setItem("as", autosaveOn);
}
function loadGame(){
	maps = JSON.parse(localStorage.getItem("maps"));
	triggers = JSON.parse(localStorage.getItem("triggers"));
	bests = JSON.parse(localStorage.getItem("bests"));
	attempts = JSON.parse(localStorage.getItem("attempts"));
	screenSize = Number(JSON.parse(localStorage.getItem("size")));
	showPercents = JSON.parse(localStorage.getItem("showp"));
	showAtts = JSON.parse(localStorage.getItem("showa"));
	autosaveOn = JSON.parse(localStorage.getItem("as"));
}
var autosaveOn = false;
var saver;
function swicthAutosave(){
	autosaveOn = !autosaveOn;
	if (autosaveOn){
		saver = setInterval(saveGame, 60000);
	}
	else{
		clearInterval(saver);
	}
}
function wipeGame(){
	if (confirm("Are you sure you want to wipe everything?")){
		localStorage.setItem("maps", JSON.stringify(freshMaps));
		localStorage.setItem("triggers", JSON.stringify(freshTriggers));
		localStorage.setItem("bests", JSON.stringify(freshBests));
		localStorage.setItem("attempts", JSON.stringify(freshAttempts));
		localStorage.setItem("size", "12");
		localStorage.setItem("showp", "true");
		localStorage.setItem("showa", "true");
		localStorage.setItem("as", "true");
	}
}
function wipeStats(){
	localStorage.setItem("bests", JSON.stringify(freshBests));
	localStorage.setItem("attempts", JSON.stringify(freshAttempts));
}
step();
document.addEventListener("keydown", function(){held = true;})
document.addEventListener("keyup", function(){waveSpd = 1; held = false; if(mode != 3){bufferCheck = true;}})
</script>
</body>
</html>
